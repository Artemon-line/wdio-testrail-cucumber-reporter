<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"test-rail.js.html":{"id":"test-rail.js.html","title":"Source: test-rail.js","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter Source: test-rail.js /** * @exports TestRail * @requires sync-request */ const request = require('sync-request'); /** * TestRail basic API wrapper */ class TestRail { /** * @param {Object} options - wdio TestRail specifc configurations * @param {string} options.domain - Domain for TestRail * @param {number} options.projectId - Project identifier * @param {Array.&lt;number&gt;} options.suiteId - List of suites identifiers * @param {number} [options.assignedToId] - User identifier * @param {string} options.username - User email * @param {string} options.password - User API key * @param {Boolean} options.includeAll - Flag to inlcude all tests from a suite in a run * @param {number} [options.updateRun] - Test run identifier for test run to update * @param {number} [options.updatePlan] - Test plan identifier for a test plan to update */ constructor(options) { this._validate(options, 'domain'); this._validate(options, 'username'); this._validate(options, 'password'); this._validate(options, 'projectId'); this._validate(options, 'suiteId'); this._validate(options, 'includeAll'); // compute base url this.options = options; this.base = `https://${options.domain}/index.php`; } /** * Verifies if required options exist in webdriverio config file * * @param {Object} options - wdio TestRail specifc configurations * @param {string} options.domain - Domain for TestRail * @param {number} options.projectId - Project identifier * @param {Array.&lt;number&gt;} options.suiteId - List of suites identifiers * @param {number} [options.assignedToId] - User identifier * @param {string} options.username - User email * @param {string} options.password - User API key * @param {Boolean} options.includeAll - Flag to inlcude all tests from a suite in a run * @param {number} [options.updateRun] - Test run identifier for test run to update * @param {number} [options.updatePlan] - Test plan identifier for a test plan to update * @param {string} name - Name of the property * @private */ _validate(options, name) { if (options == null) { throw new Error(&quot;Missing testRailsOptions in wdio.conf&quot;); } if (options[name] == null) { throw new Error(`Missing ${name} value. Please update testRailsOptions in wdio.conf`); } } /** * Construct and returns an API path * * @param {string} path - The path for the API * @return {string} Constructed URL path to TestRail API * @private */ _url(path) { return `${this.base}?${path}`; } /** * Makes a POST request on a TestRail API * * @param {string} api - API path * @param {*} body - Body of request * @param {callback} error - Callback to handle errors * @return {*} Response object * @private */ _post(api, body, error = undefined) { return this._request(&quot;POST&quot;, api, body, error); } /** * Makes a GET request on a TestRail API * * @param {string} api - API path * @param {callback} error - Callback to handle errors * @return {*} Response object * @private */ _get(api, error = undefined) { return this._request(&quot;GET&quot;, api, null, error); } /** * Makes a request to the TestRail API * * @param {string} method - Type of request to make * @param {string} api - API path * @param {*} body Body of request * @param {callback} error * @return {*} API response * @private */ _request(method, api, body, error = undefined) { let options = { headers: { &quot;Authorization&quot;: &quot;Basic &quot; + new Buffer(this.options.username + &quot;:&quot; + this.options.password).toString(&quot;base64&quot;), &quot;Content-Type&quot;: &quot;application/json&quot; }, }; if (body) { options['json'] = body; } let result = request(method, this._url(`/api/v2/${api}`), options); result = JSON.parse(result.getBody('utf8')); if (result.error) { console.log(&quot;Error: %s&quot;, JSON.stringify(result.body)); if (error) { error(result.error); } else { throw new Error(result.error); } } return result; } /** * Creates a new array of unique data from the data * within 2 existing arrays * * @param {Array.&lt;*&gt;} currArr * @param {Array.&lt;*&gt;} newArr * @returns {array} * @private */ _createUniqueArray(currArr, newArr) { } /** * Creates a new test plan * * @param {string} name - Plan name * @param {string} desc - Plane description * @param {Array.&lt;Object&gt;} testRuns - Test runs * @returns {*} API response */ addPlan(name, description, testRuns) { return this._post(`add_plan/${this.options.projectId}`, { &quot;name&quot;: name, &quot;description&quot;: description, &quot;entries&quot;: testRuns }); } /** * Retrieves a test plan * * @param {number} planId - Plan identifier * @returns {*} API response */ getPlan(planId) { return this._get(`get_plan/${this.options.updatePlan}`); } /** * Adds a test plan entry to the current project * * @param {number} planId - Plan identifier * @param {number} suiteId - Suite identifier * @param {string} name - Plan name * @param {string} desc - Plan name * @param {Array.&lt;Object&gt;} runs - Test runs * @param {Array.&lt;number&gt;} caseIds - Test case identifiers * @return {*} API response */ addTestPlanEntry(planId, suiteId, name, desc, runs, caseIds) { return this._post( `add_plan_entry/${planId}`, { 'include_all': this.options.includeAll, 'suite_id': suiteId, 'name': name, 'description': desc, 'runs': runs, 'case_ids': caseIds }); } /** * Adds missing case ids to a test plan entry * * @param {number} planId - Plan identifier * @param {number} entryId - Entry identifier * @param {Array.&lt;number&gt;} caseIds - Test case identifiers * @return {*} API response */ updateTestPlanEntry(planId, entryId, caseIds) { return this._post(`update_plan_entry/${planId}/${entryId}`, { case_ids: caseIds }); } /** * Gets a suite * * @param {number} suiteId - Suite identifier * @return {*} API response */ getSuite(suiteId) { return this._get(`get_suite/${suiteId}`); } /** * Gets all the tests in a run * * @param {number} runId - Run identifier * @return {*} API response */ getTestsForRun(runId) { this._get(`get_tests/${runId}`) } /** * Adds a test run * * @param {string} name - Test run name * @param {string} description - Test run description * @param {number} suiteId - Suite id for test cases in this run * @return {*} API response */ addRun(name, description, suiteId, caseIds) { return this._post(`add_run/${this.options.projectId}`, { &quot;suite_id&quot;: suiteId, &quot;name&quot;: name, &quot;description&quot;: description, &quot;assignedto_id&quot;: this.options.assignedToId, &quot;include_all&quot;: this.options.includeAll, &quot;case_ids&quot;: caseIds }); } /** * Adds test cases to a test run * * @param {number} runId - Run identifier * @param {Array.&lt;Object&gt;} cases - Test case data * @return {*} API response */ addCasesToRun(runId, cases) { const currentCases = this._get(`get_tests/${runId}`).map(c =&gt; c.case_id); //console.log([...currentCases, ...cases]) this._post(`update_run/${runId}`, { 'case_ids': [...new Set([...currentCases, ...cases])] }); } /** * Get test cases that belong to a suite * * @param {*} projectId - Project identifier * @param {*} suiteId - Suite identifier * @return {*} API response */ getCasesForSuite(projectId, suiteId) { return this._get(`get_cases/${projectId}&amp;suite_id=${suiteId}`); } /** * Adds test results for a test cases * * @param {number} runId - Run identifier * @param {Array.&lt;Object&gt;} results - Test case results * * @return {*} API response */ addResultsForCases(runId, results) { if (results.length &gt; 0) { return this._post(`add_results_for_cases/${runId}`, { results: results }); } } /** * Publishes results of execution of an automated test run * * @param {string} name - Test run/plan name * @param {string} description * @param {Array.&lt;Object&gt;} results * @param {callback} callback */ publish(name, description, results, callback = undefined) { let runs = []; let body = null; let plan = null if (typeof this.options.suiteId !== 'number') { if (this.options.updatePlan) { //1. find our existing plan plan = this.getPlan(this.options.updatePlan); //console.log(plan); plan.entries.forEach(entry =&gt; { //console.log(entry.runs) const suiteInfo = this.getSuite(entry.runs[0].suite_id); const currentCases = this.getCasesForRun(entry.runs[0].id).map(c =&gt; c.case_id); suiteInfo.cases = this.getCasesForSuite(this.options.projectId, suiteInfo.id).map(c =&gt; c.id); suiteInfo.newCases = results.filter(r =&gt; suiteInfo.cases.includes(r.case_id)); //reset case id listing this.updateTestPlanEntry( plan.id, entry.id, this._createUniqueArray( currentCases, ...suiteInfo.newCases.map(r =&gt; r.case_id) ) ) body = []; //add new results body.push(this.addResultsForCases(entry.runs[0].id, suiteInfo.newCases)); }) } else { //1. create the test plan plan = this.addPlan(name, description, []); //2. for each suite, find the associated results for that suite &amp; add those to the correct runs in the test plan this.options.suiteId.forEach((suiteId, idx) =&gt; { const suiteInfo = this.getSuite(suiteId); suiteInfo.cases = this.getCasesForSuite(this.options.projectId, suiteId).map(c =&gt; c.id); // update plan with test runs runs.push(this.addTestPlanEntry(plan.id, suiteId, suiteInfo.name, description, [{ 'name': suiteInfo.name, 'description': description, 'suite_id': suiteId, }], results.map(r =&gt; r.case_id)).runs[0]); //console.log(results.filter(r =&gt; suiteInfo.cases.includes(r.case_id))); body = []; body.push(this.addResultsForCases(runs[idx].id, results.filter(r =&gt; suiteInfo.cases.includes(r.case_id)))); //console.log(`Add updateRun:[${runs[idx].id}] to your config to update this run [${suiteInfo.name}].`); }); } console.log(`Results published to ${this.base}?/plans/view/${plan.id}`); console.log(`Add updatePlan: ${plan.id} to your config to update this plan.`); } else { if (this.options.updateRun) { //update run here runs[0] = { id: this.options.updateRun }; //add any missing test case ids to a run this.addCasesToRun(runs[0].id, results.map(r =&gt; r.case_id)); } else { runs.push(this.addRun(name, description, this.options.suiteId, results.map(r =&gt; r.case_id))); } body = this.addResultsForCases(runs[0].id, results); console.log(`Results published to ${this.base}?/runs/view/${runs[0].id}`); console.log(`Add updateRun: ${runs[0].id} to your config to update this run.`); } // execute callback if specified if (callback) { callback(body); } } } module.exports = TestRail; × Search results Close npm module "},"wdio-testrail-cucumber-reporter.js.html":{"id":"wdio-testrail-cucumber-reporter.js.html","title":"Source: wdio-testrail-cucumber-reporter.js","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter Source: wdio-testrail-cucumber-reporter.js /** * @exports WdioTestRailCucumberReporter * @requires events * @requires ./test-rail * @requires mocha-testrail-reporter/dist/lib/shared * @requires mocha-testrail-reporter/dist/lib/testrail.interface */ const events = require('events'); const TestRail = require('./test-rail'); const titleToCaseIds = require('mocha-testrail-reporter/dist/lib/shared').titleToCaseIds; const Status = require('mocha-testrail-reporter/dist/lib/testrail.interface').Status; /** * Class representing Cucumber reporter data and methods * @extends events.EventEmitter */ class WdioTestRailCucumberReporter extends events.EventEmitter { /** * @constructor * @param {{}} baseReporter - Configured in wdio.conf file * @param {Object} config - wdio config proprties * @param {Object} config.testRailsOptions - wdio TestRail specifc configurations * @param {string} config.testRailsOptions.domain - Domain for TestRail * @param {number} config.testRailsOptions.projectId - Project identifier * @param {Array.&lt;number&gt;} config.testRailsOptions.suiteId - List of suites identifiers * @param {number} [config.testRailsOptions.assignedToId] - User identifier * @param {string} config.testRailsOptions.username - User email * @param {string} config.testRailsOptions.password - User API key * @param {Boolean} config.testRailsOptions.includeAll - Flag to inlcude all tests from a suite in a run * @param {number} [config.testRailsOptions.updateRun] - Test run identifier for test run to update * @param {number} [config.testRailsOptions.updatePlan] - Test plan identifier for a test plan to update */ constructor(baseReporter, config) { super(); const options = config.testRailsOptions; this._results = []; this._passes = 0; this._fails = 0; this._pending = 0; this._out = []; this.testRail = new TestRail(options); this.on('test:pending', (test) =&gt; { this._pending++; this._out.push(test.title + ': pending'); }); this.on('test:pass', (test) =&gt; { this._passes++; this._out.push(test.title + ': pass'); let caseIds = titleToCaseIds(test.parent); //look in the parent for the testrail id (represents a scenario or scenario outline) if (caseIds.length &gt; 0) { let results = caseIds.map(caseId =&gt; { return { case_id: caseId, status_id: Status.Passed, comment: `${test.title}` }; }); this._results.push(...results); } }); this.on('test:fail', (test) =&gt; { this._fails++; this._out.push(test.title + ': fail'); let caseIds = titleToCaseIds(test.parent); if (caseIds.length &gt; 0) { let results = caseIds.map(caseId =&gt; { return { case_id: caseId, status_id: Status.Failed, comment: `${test.title} ${test.err.message} ${test.err.stack} ` }; }); this._results.push(...results); } }); this.on('end', () =&gt; { if (this._results.length == 0) { console.warn(&quot;No testcases were matched. Ensure that your tests are declared correctly and matches TCxxx\\n&quot; + &quot;You may use script generate-cases to do it automatically.&quot;); return; } const executionDateTime = new Date(); const total = this._passes + this._fails + this._pending; const runName = options.runName || WdioTestRailReporter.reporterName; const name = `${runName}: automated test run ${executionDateTime}`; const description = `${name} Execution summary: Passes: ${this._passes} Fails: ${this._fails} Pending: ${this._pending} Total: ${total} `; this.testRail.publish(name, description, this._results); }); } } WdioTestRailCucumberReporter.reporterName = 'WebDriver.io Cucumber TestRail Reporter'; module.exports = WdioTestRailCucumberReporter; × Search results Close npm module "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter Modules Classes TestRail WdioTestRailCucumberReporter × Search results Close npm module "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter Classes Classes TestRail WdioTestRailCucumberReporter × Search results Close npm module "},"index.html":{"id":"index.html","title":"Index","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter TestRail Reporter for Webdriver.io using CucumberPushes test results into TestRail system.Fork from wdio testrail reporter Installation npm i wdio-testrail-cucumber-reporter -DUsageEnsure that your TestRail installation API is enabled and generate your API keys. See http://docs.gurock.com/ Add reporter to wdio.conf.js: const WdioCucumberTestRailReporter = require('wdio-testrail-cucumber-reporter'); ... reporters: ['spec', WdioCucumberTestRailReporter], testRailsOptions: { domain: &quot;yourdomain.testrail.net&quot;, username: &quot;username&quot;, password: &quot;password&quot;, projectId: 1, suiteId: 1, runName: &quot;My test run&quot;, includeAll: true }Mark your cucumber scenarios with ID of TestRail test cases. Ensure that your case ids are well distinct from test descriptions. Scenario: C123 C324 I should be able to navigate to the home page Scenario Outline: C123 C324 I should be able to navigate to the home pageOnly passed or failed tests will be published. Skipped or pending tests will not be published resulting in a &quot;Pending&quot; status in TestRail test run. JSDocs can be found here Optionsdomain: string domain name of your TestRail instance (e.g. for a hosted instance instance.testrail.net) username: string user email under which the test run will be created password: string password or API token for user projectId: number project number with which the tests are associated suiteId: array suite numbers with which the tests are associated includeAll: boolean should all of the tests from the test suite be added to the run ? runName: string Name that will be given to the run on TestRail assignedToId: number (optional) user id which will be assigned failed tests Advanced OptionsScenario AYou want to update a previous automation run (independent/in a test plan) without creating a new run. Add to your config object: updateRun: runIdCannot be used with Scenario C or D Scenario BYou want to execute an automation run that does not include all tests in the suite, just the ones in your automation. Add to your config object: includeAll: falseCan be used with any configuration Scenario CYou want to create a test plan; test runs that pull cases from multiple suites. Add to your config object: suiteId: [id1,id2,id3...]Can be used with scenario D Scenario DYou want to update the test results in your test plan without creating a new test plan. Add to your config object: suiteId: [id1,id2,id3...], updatePlan: planIdFeel free to submit any bugs/issues/suggestionshttps://github.com/gavin771/wdio-testrail-cucumber-reporter/issues References https://www.npmjs.com/package/mocha-testrail-reporter http://webdriver.io/guide/reporters/customreporter.html http://docs.gurock.com/testrail-api2/start × Search results Close npm module "},"module-TestRail.html":{"id":"module-TestRail.html","title":"Module: TestRail","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter Module: TestRail Source: test-rail.js, line 6 Requires module:sync-request Classes TestRail × Search results Close npm module "},"module-TestRail-TestRail.html":{"id":"module-TestRail-TestRail.html","title":"Class: TestRail","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter Class: TestRail TestRail~ TestRail TestRail basic API wrapper new TestRail(options) Parameters: Name Type Description options Object wdio TestRail specifc configurations Properties Name Type Argument Description domain string Domain for TestRail projectId number Project identifier suiteId Array.&lt;number&gt; List of suites identifiers assignedToId number &lt;optional&gt; User identifier username string User email password string User API key includeAll Boolean Flag to inlcude all tests from a suite in a run updateRun number &lt;optional&gt; Test run identifier for test run to update updatePlan number &lt;optional&gt; Test plan identifier for a test plan to update Source: test-rail.js, line 11 Methods addCasesToRun(runId, cases) Adds test cases to a test run Parameters: Name Type Description runId number Run identifier cases Array.&lt;Object&gt; Test case data Source: test-rail.js, line 255 Returns: API response Type * addPlan(name, desc, testRuns) Creates a new test plan Parameters: Name Type Description name string Plan name desc string Plane description testRuns Array.&lt;Object&gt; Test runs Source: test-rail.js, line 154 Returns: API response Type * addResultsForCases(runId, results) Adds test results for a test cases Parameters: Name Type Description runId number Run identifier results Array.&lt;Object&gt; Test case results Source: test-rail.js, line 282 Returns: API response Type * addRun(name, description, suiteId) Adds a test run Parameters: Name Type Description name string Test run name description string Test run description suiteId number Suite id for test cases in this run Source: test-rail.js, line 237 Returns: API response Type * addTestPlanEntry(planId, suiteId, name, desc, runs, caseIds) Adds a test plan entry to the current project Parameters: Name Type Description planId number Plan identifier suiteId number Suite identifier name string Plan name desc string Plan name runs Array.&lt;Object&gt; Test runs caseIds Array.&lt;number&gt; Test case identifiers Source: test-rail.js, line 183 Returns: API response Type * getCasesForSuite(projectId, suiteId) Get test cases that belong to a suite Parameters: Name Type Description projectId * Project identifier suiteId * Suite identifier Source: test-rail.js, line 270 Returns: API response Type * getPlan(planId) Retrieves a test plan Parameters: Name Type Description planId number Plan identifier Source: test-rail.js, line 168 Returns: API response Type * getSuite(suiteId) Gets a suite Parameters: Name Type Description suiteId number Suite identifier Source: test-rail.js, line 215 Returns: API response Type * getTestsForRun(runId) Gets all the tests in a run Parameters: Name Type Description runId number Run identifier Source: test-rail.js, line 225 Returns: API response Type * publish(name, description, results, callback) Publishes results of execution of an automated test run Parameters: Name Type Description name string Test run/plan name description string results Array.&lt;Object&gt; callback callback Source: test-rail.js, line 298 updateTestPlanEntry(planId, entryId, caseIds) Adds missing case ids to a test plan entry Parameters: Name Type Description planId number Plan identifier entryId number Entry identifier caseIds Array.&lt;number&gt; Test case identifiers Source: test-rail.js, line 203 Returns: API response Type * × Search results Close npm module "},"module-WdioTestRailCucumberReporter.html":{"id":"module-WdioTestRailCucumberReporter.html","title":"Module: WdioTestRailCucumberReporter","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter Module: WdioTestRailCucumberReporter Source: wdio-testrail-cucumber-reporter.js, line 9 Requires module:events module:./test-rail module:mocha-testrail-reporter/dist/lib/shared module:mocha-testrail-reporter/dist/lib/testrail.interface Classes WdioTestRailCucumberReporter × Search results Close npm module "},"module-WdioTestRailCucumberReporter-WdioTestRailCucumberReporter.html":{"id":"module-WdioTestRailCucumberReporter-WdioTestRailCucumberReporter.html","title":"Class: WdioTestRailCucumberReporter","body":" WDIO-Cucumber-TestRail Modules TestRailWdioTestRailCucumberReporter Classes TestRail~TestRailWdioTestRailCucumberReporter~WdioTestRailCucumberReporter Class: WdioTestRailCucumberReporter WdioTestRailCucumberReporter~ WdioTestRailCucumberReporter Class representing Cucumber reporter data and methods new WdioTestRailCucumberReporter(baseReporter, config) Parameters: Name Type Description baseReporter Object Configured in wdio.conf file config Object wdio config proprties Properties Name Type Description testRailsOptions Object wdio TestRail specifc configurations Properties Name Type Argument Description domain string Domain for TestRail projectId number Project identifier suiteId Array.&lt;number&gt; List of suites identifiers assignedToId number &lt;optional&gt; User identifier username string User email password string User API key includeAll Boolean Flag to inlcude all tests from a suite in a run updateRun number &lt;optional&gt; Test run identifier for test run to update updatePlan number &lt;optional&gt; Test plan identifier for a test plan to update Source: wdio-testrail-cucumber-reporter.js, line 18 Extends events.EventEmitter × Search results Close npm module "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
